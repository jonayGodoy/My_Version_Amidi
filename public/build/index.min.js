/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 5);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var ManagerFile = __webpack_require__(3);
var Game = __webpack_require__(1);
var ManagerQuiz = __webpack_require__(4);
var ManagerDom = __webpack_require__(2);

initialise();
function initialise() {
    var managerFile = new ManagerFile();
    managerFile.loadJson().then(function (listQuestionJson) {
        var managerQuiz = new ManagerQuiz(listQuestionJson.preguntas);
        var managerDom = new ManagerDom();
        var game = new Game(managerQuiz, managerDom);

        window.start = game.startGame;
        window.updateAnswer = game.updateAnswer;
        window.nextQuestion = game.nextQuestion;
    });
}

window.resetGame = function () {
    location.reload(true);
};

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function Game(managerQuiz, managerDom) {

    var NUMBER_FOR_WIN = 5;

    var countQuestionsSuccess = 0;

    this.startGame = function () {
        managerDom.start();

        var question = managerQuiz.getCurrentQuestion();
        managerDom.renderQuestion(question);
    };

    this.updateAnswer = function (answer) {
        var isCorrect = managerQuiz.isCorrectQuestion(answer);
        if (isCorrect) {
            countQuestionsSuccess = countQuestionsSuccess + 1;
            managerQuiz.updateQuestions();
        }

        managerDom.renderQuestionAnswered(answer, isCorrect);
        managerDom.toggleButtonNext();
    };

    this.nextQuestion = function () {
        if (isPlayerWin()) {
            managerDom.printVictory();
        } else {
            var question = managerQuiz.getCurrentQuestion();
            managerDom.renderQuestion(question);
            managerDom.toggleButtonNext();
        }
    };

    function isPlayerWin() {
        return countQuestionsSuccess === NUMBER_FOR_WIN;
    };
};

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function ManagerDom() {
    var _this = this;

    var idLoad = "amidi";
    var idApp = "app";

    var idQuestion = "preguntas";
    var idNext = "siguiente";

    var idWin = "ganador";

    this.start = function () {
        var divLoad = document.getElementById(idLoad);
        var divApp = document.getElementById(idApp);

        divLoad.classList.add('hidden');
        divApp.classList.remove('hidden');

        document.body.style.backgroundColor = '#57CCD8';
    };

    this.renderQuestion = function (question) {
        var divQuestion = document.getElementById(idQuestion);

        var answerHtml = "<h1 class='center'>" + question.pregunta + "</h1>";
        for (var nAnswer in question.respuestas) {
            answerHtml = answerHtml + " <div class=\"pregunta\"" + " id=\"" + question.respuestas[nAnswer] + "\"" + " onclick=\"window.updateAnswer('" + question.respuestas[nAnswer] + "')\">" + question.respuestas[nAnswer] + "</div>";
        }
        divQuestion.innerHTML = answerHtml;
    };

    this.renderQuestionAnswered = function (answer, isCorrect) {
        var divAnswer = document.getElementById(answer);
        removeAnswerOnClick();

        isCorrect ? divAnswer.style.color = 'yellowgreen' : divAnswer.style.color = 'red';
    };

    this.toggleButtonNext = function () {
        var classList = document.getElementById(idNext).classList;
        var isHidden = classList.contains('hidden');

        isHidden ? classList.remove('hidden') : classList.add('hidden');
    };

    this.printVictory = function () {
        var divVictory = document.getElementById(idWin);
        var divQuestion = document.getElementById(idQuestion);

        _this.toggleButtonNext();
        divVictory.classList.remove('hidden');

        divQuestion.classList.add('hidden');
    };

    function removeAnswerOnClick() {
        var divQuestion = document.getElementById(idQuestion);

        var childNodes = divQuestion.childNodes;
        for (var i = 0; i < childNodes.length; i++) {
            childNodes[i].onclick = function () {
                return false;
            };
        }
    }
};

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function ManagerFile() {
    this.loadJson = function () {
        return new Promise(function (resolve, reject) {
            var data = "";
            var httpRequest = new XMLHttpRequest();
            httpRequest.onreadystatechange = function () {
                if (httpRequest.readyState === 4) {
                    if (httpRequest.status === 200) {
                        data = httpRequest.responseText;
                        resolve(JSON.parse(data));
                    }
                }
            };
            httpRequest.open('get', '../public/preguntas.json');
            httpRequest.send();
        });
    };
};

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function ManagerQuiz(ListQuestion) {

    var listQuestion = ListQuestion;
    var currentQuestion = randomQuestion();

    this.getCurrentQuestion = function () {
        return currentQuestion;
    };

    this.getListQuestion = function () {
        return listQuestion;
    };

    this.isCorrectQuestion = function (answer) {
        var result = currentQuestion.respuesta === answer;
        return result;
    };

    this.updateQuestions = function () {
        deleteCurrentQuestionToList();
        currentQuestion = randomQuestion();
    };

    function randomQuestion() {
        var index = Math.floor(Math.random() * (listQuestion.length - 0) + 0);
        return listQuestion[index];
    }

    function deleteCurrentQuestionToList() {
        var position = listQuestion.indexOf(currentQuestion);
        listQuestion.splice(position, 1);
    }
};

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(0);


/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNGY2MmY0ZTU0M2YwMDU2NmE2MDAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9HYW1lLmpzIiwid2VicGFjazovLy8uL3NyYy9NYW5hZ2VyRG9tLmpzIiwid2VicGFjazovLy8uL3NyYy9NYW5hZ2VyRmlsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvTWFuYWdlclF1aXouanMiXSwibmFtZXMiOlsiTWFuYWdlckZpbGUiLCJyZXF1aXJlIiwiR2FtZSIsIk1hbmFnZXJRdWl6IiwiTWFuYWdlckRvbSIsImluaXRpYWxpc2UiLCJtYW5hZ2VyRmlsZSIsImxvYWRKc29uIiwidGhlbiIsIm1hbmFnZXJRdWl6IiwibGlzdFF1ZXN0aW9uSnNvbiIsInByZWd1bnRhcyIsIm1hbmFnZXJEb20iLCJnYW1lIiwid2luZG93Iiwic3RhcnQiLCJzdGFydEdhbWUiLCJ1cGRhdGVBbnN3ZXIiLCJuZXh0UXVlc3Rpb24iLCJyZXNldEdhbWUiLCJsb2NhdGlvbiIsInJlbG9hZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJOVU1CRVJfRk9SX1dJTiIsImNvdW50UXVlc3Rpb25zU3VjY2VzcyIsInF1ZXN0aW9uIiwiZ2V0Q3VycmVudFF1ZXN0aW9uIiwicmVuZGVyUXVlc3Rpb24iLCJhbnN3ZXIiLCJpc0NvcnJlY3QiLCJpc0NvcnJlY3RRdWVzdGlvbiIsInVwZGF0ZVF1ZXN0aW9ucyIsInJlbmRlclF1ZXN0aW9uQW5zd2VyZWQiLCJ0b2dnbGVCdXR0b25OZXh0IiwiaXNQbGF5ZXJXaW4iLCJwcmludFZpY3RvcnkiLCJpZExvYWQiLCJpZEFwcCIsImlkUXVlc3Rpb24iLCJpZE5leHQiLCJpZFdpbiIsImRpdkxvYWQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZGl2QXBwIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiYm9keSIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiZGl2UXVlc3Rpb24iLCJhbnN3ZXJIdG1sIiwicHJlZ3VudGEiLCJuQW5zd2VyIiwicmVzcHVlc3RhcyIsImlubmVySFRNTCIsImRpdkFuc3dlciIsInJlbW92ZUFuc3dlck9uQ2xpY2siLCJjb2xvciIsImlzSGlkZGVuIiwiY29udGFpbnMiLCJkaXZWaWN0b3J5IiwiY2hpbGROb2RlcyIsImkiLCJsZW5ndGgiLCJvbmNsaWNrIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJkYXRhIiwiaHR0cFJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJyZXNwb25zZVRleHQiLCJKU09OIiwicGFyc2UiLCJvcGVuIiwic2VuZCIsIkxpc3RRdWVzdGlvbiIsImxpc3RRdWVzdGlvbiIsImN1cnJlbnRRdWVzdGlvbiIsInJhbmRvbVF1ZXN0aW9uIiwiZ2V0TGlzdFF1ZXN0aW9uIiwicmVzdWx0IiwicmVzcHVlc3RhIiwiZGVsZXRlQ3VycmVudFF1ZXN0aW9uVG9MaXN0IiwiaW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwb3NpdGlvbiIsImluZGV4T2YiLCJzcGxpY2UiXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxtREFBMkMsY0FBYzs7QUFFekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBMkIsMEJBQTBCLEVBQUU7QUFDdkQseUNBQWlDLGVBQWU7QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOERBQXNELCtEQUErRDs7QUFFckg7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7OztBQ2hFQTs7QUFFQSxJQUFJ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QTNELE9BQU9DLE9BQVAsR0FBaUIsU0FBU3BCLFdBQVQsQ0FBcUIrRSxZQUFyQixFQUFtQzs7QUFFaEQsUUFBSUMsZUFBZUQsWUFBbkI7QUFDQSxRQUFJRSxrQkFBa0JDLGdCQUF0Qjs7QUFHQSxTQUFLMUQsa0JBQUwsR0FBMEI7QUFBQSxlQUFPeUQsZUFBUDtBQUFBLEtBQTFCOztBQUVBLFNBQUtFLGVBQUwsR0FBdUI7QUFBQSxlQUFPSCxZQUFQO0FBQUEsS0FBdkI7O0FBR0MsU0FBS3BELGlCQUFMLEdBQXlCLFVBQVNGLE1BQVQsRUFBaUI7QUFDdkMsWUFBSTBELFNBQVNILGdCQUFnQkksU0FBaEIsS0FBOEIzRCxNQUEzQztBQUNDLGVBQU8wRCxNQUFQO0FBQ0osS0FIQTs7QUFLRCxTQUFLdkQsZUFBTCxHQUF3QixZQUFXO0FBQy9CeUQ7QUFDQUwsMEJBQWtCQyxnQkFBbEI7QUFDSCxLQUhEOztBQUtBLGFBQVNBLGNBQVQsR0FBMEI7QUFDdEIsWUFBSUssUUFBUUMsS0FBS0MsS0FBTCxDQUFXRCxLQUFLRSxNQUFMLE1BQWlCVixhQUFhakIsTUFBYixHQUFzQixDQUF2QyxJQUE0QyxDQUF2RCxDQUFaO0FBQ0EsZUFBT2lCLGFBQWFPLEtBQWIsQ0FBUDtBQUNIOztBQUVELGFBQVNELDJCQUFULEdBQXNDO0FBQ2xDLFlBQUlLLFdBQVdYLGFBQWFZLE9BQWIsQ0FBcUJYLGVBQXJCLENBQWY7QUFDQUQscUJBQWFhLE1BQWIsQ0FBb0JGLFFBQXBCLEVBQTZCLENBQTdCO0FBQ0g7QUFFSixDQS9CRCxDIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDUpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDRmNjJmNGU1NDNmMDA1NjZhNjAwIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxubGV0IE1hbmFnZXJGaWxlID0gcmVxdWlyZSgnLi9NYW5hZ2VyRmlsZScpO1xyXG5sZXQgR2FtZSA9IHJlcXVpcmUoJy4vR2FtZScpO1xyXG5sZXQgTWFuYWdlclF1aXogPSByZXF1aXJlKCcuL01hbmFnZXJRdWl6Jyk7XHJcbmxldCBNYW5hZ2VyRG9tID0gcmVxdWlyZSgnLi9NYW5hZ2VyRG9tJyk7XHJcblxyXG5pbml0aWFsaXNlKCk7XHJcbmZ1bmN0aW9uIGluaXRpYWxpc2UoKXtcclxuICAgIGxldCBtYW5hZ2VyRmlsZSA9IG5ldyBNYW5hZ2VyRmlsZSgpO1xyXG4gICAgbWFuYWdlckZpbGUubG9hZEpzb24oKS50aGVuKGxpc3RRdWVzdGlvbkpzb24gPT4ge1xyXG4gICAgICAgIGxldCBtYW5hZ2VyUXVpeiA9IG5ldyBNYW5hZ2VyUXVpeihsaXN0UXVlc3Rpb25Kc29uLnByZWd1bnRhcyk7XHJcbiAgICAgICAgbGV0IG1hbmFnZXJEb20gPSBuZXcgTWFuYWdlckRvbSgpO1xyXG4gICAgICAgIGxldCBnYW1lID0gbmV3IEdhbWUobWFuYWdlclF1aXosbWFuYWdlckRvbSk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5zdGFydCA9IGdhbWUuc3RhcnRHYW1lO1xyXG4gICAgICAgIHdpbmRvdy51cGRhdGVBbnN3ZXIgPSBnYW1lLnVwZGF0ZUFuc3dlcjtcclxuICAgICAgICB3aW5kb3cubmV4dFF1ZXN0aW9uID0gZ2FtZS5uZXh0UXVlc3Rpb247XHJcbiAgICB9KTtcclxuXHJcblxyXG59XHJcblxyXG53aW5kb3cucmVzZXRHYW1lID0gZnVuY3Rpb24oKXtcclxuICAgIGxvY2F0aW9uLnJlbG9hZCh0cnVlKTtcclxufTtcclxuXHJcblxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXguanMiLCIndXNlIHN0cmljdCc7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIEdhbWUobWFuYWdlclF1aXosIG1hbmFnZXJEb20pIHtcclxuXHJcbiAgICBjb25zdCBOVU1CRVJfRk9SX1dJTiA9IDU7XHJcblxyXG4gICAgbGV0IGNvdW50UXVlc3Rpb25zU3VjY2VzcyA9IDA7XHJcblxyXG4gICAgdGhpcy5zdGFydEdhbWUgPSAoKSA9PiB7XHJcbiAgICAgICAgbWFuYWdlckRvbS5zdGFydCgpO1xyXG5cclxuICAgICAgICBsZXQgcXVlc3Rpb24gPSBtYW5hZ2VyUXVpei5nZXRDdXJyZW50UXVlc3Rpb24oKTtcclxuICAgICAgICBtYW5hZ2VyRG9tLnJlbmRlclF1ZXN0aW9uKHF1ZXN0aW9uKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy51cGRhdGVBbnN3ZXIgPSAoYW5zd2VyKSA9PiB7XHJcbiAgICAgICAgbGV0IGlzQ29ycmVjdCA9IG1hbmFnZXJRdWl6LmlzQ29ycmVjdFF1ZXN0aW9uKGFuc3dlcilcclxuICAgICAgICBpZihpc0NvcnJlY3Qpe1xyXG4gICAgICAgICAgICBjb3VudFF1ZXN0aW9uc1N1Y2Nlc3MgPSBjb3VudFF1ZXN0aW9uc1N1Y2Nlc3MgKzE7XHJcbiAgICAgICAgICAgIG1hbmFnZXJRdWl6LnVwZGF0ZVF1ZXN0aW9ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWFuYWdlckRvbS5yZW5kZXJRdWVzdGlvbkFuc3dlcmVkKGFuc3dlcixpc0NvcnJlY3QpO1xyXG4gICAgICAgIG1hbmFnZXJEb20udG9nZ2xlQnV0dG9uTmV4dCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm5leHRRdWVzdGlvbiA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYoaXNQbGF5ZXJXaW4oKSl7XHJcbiAgICAgICAgICAgIG1hbmFnZXJEb20ucHJpbnRWaWN0b3J5KCk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGxldCBxdWVzdGlvbiA9IG1hbmFnZXJRdWl6LmdldEN1cnJlbnRRdWVzdGlvbigpO1xyXG4gICAgICAgICAgICBtYW5hZ2VyRG9tLnJlbmRlclF1ZXN0aW9uKHF1ZXN0aW9uKTtcclxuICAgICAgICAgICAgbWFuYWdlckRvbS50b2dnbGVCdXR0b25OZXh0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gaXNQbGF5ZXJXaW4oKXtcclxuICAgICAgICByZXR1cm4gKGNvdW50UXVlc3Rpb25zU3VjY2VzcyA9PT0gTlVNQkVSX0ZPUl9XSU4pO1xyXG4gICAgfTtcclxuXHJcbn07XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9HYW1lLmpzIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBNYW5hZ2VyRG9tKCkge1xyXG5cclxuICAgIGNvbnN0IGlkTG9hZCA9IFwiYW1pZGlcIjtcclxuICAgIGNvbnN0IGlkQXBwID0gXCJhcHBcIjtcclxuXHJcbiAgICBjb25zdCBpZFF1ZXN0aW9uID0gXCJwcmVndW50YXNcIjtcclxuICAgIGNvbnN0IGlkTmV4dCA9IFwic2lndWllbnRlXCI7XHJcblxyXG4gICAgY29uc3QgaWRXaW4gPSBcImdhbmFkb3JcIjtcclxuXHJcbiAgICB0aGlzLnN0YXJ0ID0gKCkgPT4ge1xyXG4gICAgICAgIGxldCBkaXZMb2FkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWRMb2FkKTtcclxuICAgICAgICBsZXQgZGl2QXBwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWRBcHApO1xyXG5cclxuXHJcbiAgICAgICAgZGl2TG9hZC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgICBkaXZBcHAuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyM1N0NDRDgnO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJlbmRlclF1ZXN0aW9uID0gKHF1ZXN0aW9uKSA9PiB7XHJcbiAgICAgICAgbGV0IGRpdlF1ZXN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWRRdWVzdGlvbik7XHJcblxyXG4gICAgICAgIGxldCBhbnN3ZXJIdG1sID0gXCI8aDEgY2xhc3M9J2NlbnRlcic+XCIrcXVlc3Rpb24ucHJlZ3VudGErXCI8L2gxPlwiO1xyXG4gICAgICAgIGZvcihsZXQgbkFuc3dlciBpbiBxdWVzdGlvbi5yZXNwdWVzdGFzKXtcclxuICAgICAgICAgICAgYW5zd2VySHRtbCA9IGFuc3dlckh0bWwgK1xyXG4gICAgICAgICAgICAgICAgYCA8ZGl2IGNsYXNzPVwicHJlZ3VudGFcImBcclxuICAgICAgICAgICAgICAgICtgIGlkPVwiYCtxdWVzdGlvbi5yZXNwdWVzdGFzW25BbnN3ZXJdK2BcImBcclxuICAgICAgICAgICAgICAgICtgIG9uY2xpY2s9XCJ3aW5kb3cudXBkYXRlQW5zd2VyKCdgK3F1ZXN0aW9uLnJlc3B1ZXN0YXNbbkFuc3dlcl0rYCcpXCI+YFxyXG4gICAgICAgICAgICAgICAgKyBxdWVzdGlvbi5yZXNwdWVzdGFzW25BbnN3ZXJdXHJcbiAgICAgICAgICAgICAgICArIGA8L2Rpdj5gO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkaXZRdWVzdGlvbi5pbm5lckhUTUwgPSBhbnN3ZXJIdG1sO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJlbmRlclF1ZXN0aW9uQW5zd2VyZWQgPSAoYW5zd2VyLCBpc0NvcnJlY3QpID0+IHtcclxuICAgICAgICBsZXQgZGl2QW5zd2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYW5zd2VyKTtcclxuICAgICAgICByZW1vdmVBbnN3ZXJPbkNsaWNrKCk7XHJcblxyXG4gICAgICAgIGlzQ29ycmVjdCA/XHJcbiAgICAgICAgICAgIGRpdkFuc3dlci5zdHlsZS5jb2xvciA9ICd5ZWxsb3dncmVlbidcclxuICAgICAgICAgICAgOiBkaXZBbnN3ZXIuc3R5bGUuY29sb3IgPSAncmVkJztcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50b2dnbGVCdXR0b25OZXh0ID0gKCkgPT4ge1xyXG4gICAgICAgIGxldCBjbGFzc0xpc3QgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWROZXh0KS5jbGFzc0xpc3Q7XHJcbiAgICAgICAgbGV0IGlzSGlkZGVuID0gIGNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJyk7XHJcblxyXG4gICAgICAgIGlzSGlkZGVuID9cclxuICAgICAgICAgICAgY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcclxuICAgICAgICAgICAgOiBjbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnByaW50VmljdG9yeSA9ICgpID0+IHtcclxuICAgICAgICBsZXQgZGl2VmljdG9yeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkV2luKTtcclxuICAgICAgICBsZXQgZGl2UXVlc3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZFF1ZXN0aW9uKTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uTmV4dCgpO1xyXG4gICAgICAgIGRpdlZpY3RvcnkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcblxyXG4gICAgICAgIGRpdlF1ZXN0aW9uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiByZW1vdmVBbnN3ZXJPbkNsaWNrKCl7XHJcbiAgICAgICAgbGV0IGRpdlF1ZXN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWRRdWVzdGlvbik7XHJcblxyXG4gICAgICAgIGxldCBjaGlsZE5vZGVzID0gZGl2UXVlc3Rpb24uY2hpbGROb2RlcztcclxuICAgICAgICBmb3IoIGxldCBpID0wO2kgPCBjaGlsZE5vZGVzLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBjaGlsZE5vZGVzW2ldLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcbn07XHJcblxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvTWFuYWdlckRvbS5qcyIsIid1c2Ugc3RyaWN0JztcclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBNYW5hZ2VyRmlsZSgpIHtcclxuICAgICB0aGlzLmxvYWRKc29uID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgbGV0IGRhdGEgPSBcIlwiO1xyXG4gICAgICAgICAgICBsZXQgaHR0cFJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgaHR0cFJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaHR0cFJlcXVlc3QucmVhZHlTdGF0ZSA9PT0gNCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChodHRwUmVxdWVzdC5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGh0dHBSZXF1ZXN0LnJlc3BvbnNlVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShKU09OLnBhcnNlKGRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGh0dHBSZXF1ZXN0Lm9wZW4oJ2dldCcsICcuLi9wdWJsaWMvcHJlZ3VudGFzLmpzb24nKTtcclxuICAgICAgICAgICAgaHR0cFJlcXVlc3Quc2VuZCgpO1xyXG4gICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL01hbmFnZXJGaWxlLmpzIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBNYW5hZ2VyUXVpeihMaXN0UXVlc3Rpb24pIHtcclxuXHJcbiAgICBsZXQgbGlzdFF1ZXN0aW9uID0gTGlzdFF1ZXN0aW9uO1xyXG4gICAgbGV0IGN1cnJlbnRRdWVzdGlvbiA9IHJhbmRvbVF1ZXN0aW9uKCk7XHJcblxyXG5cclxuICAgIHRoaXMuZ2V0Q3VycmVudFF1ZXN0aW9uID0gKCkgPT4gKGN1cnJlbnRRdWVzdGlvbik7XHJcblxyXG4gICAgdGhpcy5nZXRMaXN0UXVlc3Rpb24gPSAoKSA9PiAobGlzdFF1ZXN0aW9uKTtcclxuXHJcblxyXG4gICAgIHRoaXMuaXNDb3JyZWN0UXVlc3Rpb24gPSBmdW5jdGlvbihhbnN3ZXIpIHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gY3VycmVudFF1ZXN0aW9uLnJlc3B1ZXN0YSA9PT0gYW5zd2VyO1xyXG4gICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZVF1ZXN0aW9ucyA9ICBmdW5jdGlvbigpIHtcclxuICAgICAgICBkZWxldGVDdXJyZW50UXVlc3Rpb25Ub0xpc3QoKTtcclxuICAgICAgICBjdXJyZW50UXVlc3Rpb24gPSByYW5kb21RdWVzdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJhbmRvbVF1ZXN0aW9uKCkge1xyXG4gICAgICAgIGxldCBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChsaXN0UXVlc3Rpb24ubGVuZ3RoIC0gMCkgKyAwKTtcclxuICAgICAgICByZXR1cm4gbGlzdFF1ZXN0aW9uW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkZWxldGVDdXJyZW50UXVlc3Rpb25Ub0xpc3QoKXtcclxuICAgICAgICBsZXQgcG9zaXRpb24gPSBsaXN0UXVlc3Rpb24uaW5kZXhPZihjdXJyZW50UXVlc3Rpb24pO1xyXG4gICAgICAgIGxpc3RRdWVzdGlvbi5zcGxpY2UocG9zaXRpb24sMSk7XHJcbiAgICB9XHJcblxyXG59O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvTWFuYWdlclF1aXouanMiXSwic291cmNlUm9vdCI6IiJ9