/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 5);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function ManagerDom() {

    var idLoad = "amidi";
    var idApp = "app";

    var idQuestion = "preguntas";

    this.start = function () {
        var divLoad = document.getElementById(idLoad);
        var divApp = document.getElementById(idApp);

        divLoad.classList.add('hidden');
        divApp.classList.remove('hidden');

        document.body.style.backgroundColor = '#57CCD8';
    };

    this.renderQuestion = function (question) {
        var divQuestion = document.getElementById(idQuestion);

        var answerHtml = "<h1 class='center'>" + question.pregunta + "</h1>";
        for (var nAnswer in question.respuestas) {
            answerHtml = answerHtml + "<div class='pregunta' id='" + question.id + "'>" + question.respuestas[nAnswer] + "</div>";
        }
        divQuestion.innerHTML = answerHtml;
    };

    this.renderQuestionAnswered = function (question) {
        throw "UnSupportedOperationException";
    };

    this.ShowButtonNext = function () {
        throw "UnSupportedOperationException";
    };
};

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var ManagerFile = __webpack_require__(2);
var ManagerGame = __webpack_require__(3);
var ManagerQuiz = __webpack_require__(4);
var ManagerDom = __webpack_require__(0);

var managerFile = new ManagerFile();
var listJson = managerFile.loadJson();
var managerQuiz = new ManagerQuiz(listJson.preguntas);
var managerDom = new ManagerDom();
var numberForWin = 5;
var managerGame = new ManagerGame(managerQuiz, managerDom, numberForWin);

window.start = managerGame.startGame;

/*
window.uclicked = function() {
    carlos.saluda();
};
window.uclicked = uclicked;*/

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function ManagerFile() {
    this.loadJson = function () {
        var httpRequest = new XMLHttpRequest();
        httpRequest.onreadystatechange = function () {
            if (httpRequest.readyState === 4) {
                if (httpRequest.status === 200) {
                    var data = httpRequest.responseText;
                    localStorage.setItem('preguntas', data);
                }
            }
        };
        httpRequest.open('get', '../public/preguntas.json');
        httpRequest.send();
        return JSON.parse(localStorage.getItem("preguntas"));
    };
};

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var ManagerDom = __webpack_require__(0);

function ManagerGame(managerQuiz, managerDom, numberForWin) {

    var NUMBER_FOR_WIN = numberForWin;

    var countQuestionsSuccess = 0;

    constructor();
    function constructor() {
        if (NUMBER_FOR_WIN == undefined) throw "You have introduce numberForWin in the constructor";
        if (!Number.isInteger(NUMBER_FOR_WIN)) throw "You numberForWin have type Integer";
    };

    this.startGame = function () {
        managerDom.start();

        var question = managerQuiz.getCurrentQuestion();
        managerDom.renderQuestion(question);
    };

    this.updateAnswer = function (answer) {
        var question = managerQuiz.getCurrentQuestion();

        if (managerQuiz.isCorrectQuestion(answer)) {
            countQuestionsSuccess += 1;
        }

        managerDom.renderQuestionAnswered(question);
        managerDom.ShowButtonNext();
    };

    this.nextQuestion = function () {
        managerQuiz.updateQuestions();
        var question = managerQuiz.getCurrentQuestion();
        managerDom.renderQuestion(question);
    };

    this.isPlayerWin = function () {
        return countQuestionsSuccess == NUMBER_FOR_WIN;
    };
}
module.exports = ManagerGame;

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function ManagerQuiz(ListQuestion) {

    var listQuestion = ListQuestion;
    var currentQuestion = randomQuestion();

    this.getCurrentQuestion = function () {
        return currentQuestion;
    };

    this.getListQuestion = function () {
        return listQuestion;
    };

    this.isCorrectQuestion = function (question, answer) {
        var result = question.respuesta == answer;
        return result;
    };

    this.updateQuestions = function () {
        deleteCurrentQuestionToList();
        currentQuestion = randomQuestion();
    };

    function randomQuestion() {
        var index = Math.floor(Math.random() * (listQuestion.length - 0) + 0);
        return listQuestion[index];
    }

    function deleteCurrentQuestionToList() {
        var position = listQuestion.indexOf(currentQuestion);
        listQuestion.splice(position, 1);
    }
}
module.exports = ManagerQuiz;

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(1);


/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNjg5MWE1NTE0NTkzNmQ3ZDcwMjMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01hbmFnZXJEb20uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9NYW5hZ2VyRmlsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvTWFuYWdlckdhbWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01hbmFnZXJRdWl6LmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJNYW5hZ2VyRG9tIiwiaWRMb2FkIiwiaWRBcHAiLCJpZFF1ZXN0aW9uIiwic3RhcnQiLCJkaXZMb2FkIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImRpdkFwcCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImJvZHkiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsInJlbmRlclF1ZXN0aW9uIiwicXVlc3Rpb24iLCJkaXZRdWVzdGlvbiIsImFuc3dlckh0bWwiLCJwcmVndW50YSIsIm5BbnN3ZXIiLCJyZXNwdWVzdGFzIiwiaWQiLCJpbm5lckhUTUwiLCJyZW5kZXJRdWVzdGlvbkFuc3dlcmVkIiwiU2hvd0J1dHRvbk5leHQiLCJNYW5hZ2VyRmlsZSIsInJlcXVpcmUiLCJNYW5hZ2VyR2FtZSIsIk1hbmFnZXJRdWl6IiwibWFuYWdlckZpbGUiLCJsaXN0SnNvbiIsImxvYWRKc29uIiwibWFuYWdlclF1aXoiLCJwcmVndW50YXMiLCJtYW5hZ2VyRG9tIiwibnVtYmVyRm9yV2luIiwibWFuYWdlckdhbWUiLCJ3aW5kb3ciLCJzdGFydEdhbWUiLCJodHRwUmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsImRhdGEiLCJyZXNwb25zZVRleHQiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwib3BlbiIsInNlbmQiLCJKU09OIiwicGFyc2UiLCJnZXRJdGVtIiwiTlVNQkVSX0ZPUl9XSU4iLCJjb3VudFF1ZXN0aW9uc1N1Y2Nlc3MiLCJjb25zdHJ1Y3RvciIsInVuZGVmaW5lZCIsIk51bWJlciIsImlzSW50ZWdlciIsImdldEN1cnJlbnRRdWVzdGlvbiIsInVwZGF0ZUFuc3dlciIsImFuc3dlciIsImlzQ29ycmVjdFF1ZXN0aW9uIiwibmV4dFF1ZXN0aW9uIiwidXBkYXRlUXVlc3Rpb25zIiwiaXNQbGF5ZXJXaW4iLCJMaXN0UXVlc3Rpb24iLCJsaXN0UXVlc3Rpb24iLCJjdXJyZW50UXVlc3Rpb24iLCJyYW5kb21RdWVzdGlvbiIsImdldExpc3RRdWVzdGlvbiIsInJlc3VsdCIsInJlc3B1ZXN0YSIsImRlbGV0ZUN1cnJlbnRRdWVzdGlvblRvTGlzdCIsImluZGV4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibGVuZ3RoIiwicG9zaXRpb24iLCJpbmRleE9mIiwic3BsaWNlIl0sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsbURBQTJDLGNBQWM7O0FBRXpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUNBQTJCLDBCQUEwQixFQUFFO0FBQ3ZELHlDQUFpQyxlQUFlO0FBQ2hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhEQUFzRCwrREFBK0Q7O0FBRXJIO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7Ozs7QUNoRUE7O0FBRUFBLE9BQU9DLE9BQVAsR0FBaUIsU0FBU0MsVUFBVCxHQUFzQjs7QUFFbkMsUUFBTUMsU0FBUyxPQUFmO0FBQ0EsUUFBTUMsUUFBUSxLQUFkOztBQUVBLFFBQU1DLGFBQWEsV0FBbkI7O0FBRUksU0FBS0MsS0FBTCxH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TCxHQUF1QjtBQUFBLGVBQU1ILFlBQU47QUFBQSxLQUF2Qjs7QUFHQyxTQUFLTCxpQkFBTCxHQUF5QixVQUFTL0MsUUFBVCxFQUFrQjhDLE1BQWxCLEVBQTBCO0FBQ2hELFlBQUlVLFNBQVN4RCxTQUFTeUQsU0FBVCxJQUFzQlgsTUFBbkM7QUFDQyxlQUFPVSxNQUFQO0FBQ0osS0FIQTs7QUFLRCxTQUFLUCxlQUFMLEdBQXdCLFlBQVc7QUFDL0JTO0FBQ0FMLDBCQUFrQkMsZ0JBQWxCO0FBQ0gsS0FIRDs7QUFLQSxhQUFTQSxjQUFULEdBQTBCO0FBQ3RCLFlBQUlLLFFBQVFDLEtBQUtDLEtBQUwsQ0FBV0QsS0FBS0UsTUFBTCxNQUFpQlYsYUFBYVcsTUFBYixHQUFzQixDQUF2QyxJQUE0QyxDQUF2RCxDQUFaO0FBQ0EsZUFBT1gsYUFBYU8sS0FBYixDQUFQO0FBQ0g7O0FBRUQsYUFBU0QsMkJBQVQsR0FBc0M7QUFDbEMsWUFBSU0sV0FBV1osYUFBYWEsT0FBYixDQUFxQlosZUFBckIsQ0FBZjtBQUNBRCxxQkFBYWMsTUFBYixDQUFvQkYsUUFBcEIsRUFBNkIsQ0FBN0I7QUFDSDtBQUVKO0FBQ0RsRixPQUFPQyxPQUFQLEdBQWlCOEIsV0FBakIsQyIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA2ODkxYTU1MTQ1OTM2ZDdkNzAyMyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gTWFuYWdlckRvbSgpIHtcclxuXHJcbiAgICBjb25zdCBpZExvYWQgPSBcImFtaWRpXCI7XHJcbiAgICBjb25zdCBpZEFwcCA9IFwiYXBwXCI7XHJcblxyXG4gICAgY29uc3QgaWRRdWVzdGlvbiA9IFwicHJlZ3VudGFzXCJcclxuXHJcbiAgICAgICAgdGhpcy5zdGFydCA9ICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGRpdkxvYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZExvYWQpO1xyXG4gICAgICAgICAgICBsZXQgZGl2QXBwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWRBcHApO1xyXG5cclxuICAgICAgICAgICAgZGl2TG9hZC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgZGl2QXBwLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzU3Q0NEOCc7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5yZW5kZXJRdWVzdGlvbiA9IChxdWVzdGlvbikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZGl2UXVlc3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZFF1ZXN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBhbnN3ZXJIdG1sID0gXCI8aDEgY2xhc3M9J2NlbnRlcic+XCIrcXVlc3Rpb24ucHJlZ3VudGErXCI8L2gxPlwiO1xyXG4gICAgICAgICAgICBmb3IobGV0IG5BbnN3ZXIgaW4gcXVlc3Rpb24ucmVzcHVlc3Rhcyl7XHJcbiAgICAgICAgICAgICAgICBhbnN3ZXJIdG1sID0gYW5zd2VySHRtbCArXHJcbiAgICAgICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdwcmVndW50YScgaWQ9J1wiK3F1ZXN0aW9uLmlkK1wiJz5cIlxyXG4gICAgICAgICAgICAgICAgICAgICtxdWVzdGlvbi5yZXNwdWVzdGFzW25BbnN3ZXJdK1wiPC9kaXY+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGl2UXVlc3Rpb24uaW5uZXJIVE1MID0gYW5zd2VySHRtbDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnJlbmRlclF1ZXN0aW9uQW5zd2VyZWQgPSAocXVlc3Rpb24pID0+IHtcclxuICAgICAgICAgICAgdGhyb3cgXCJVblN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvblwiO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuU2hvd0J1dHRvbk5leHQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRocm93IFwiVW5TdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25cIjtcclxuICAgICAgICB9O1xyXG5cclxufTtcclxuXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9NYW5hZ2VyRG9tLmpzIiwibGV0IE1hbmFnZXJGaWxlID0gcmVxdWlyZSgnLi9NYW5hZ2VyRmlsZScpO1xyXG5sZXQgTWFuYWdlckdhbWUgPSByZXF1aXJlKCcuL01hbmFnZXJHYW1lJyk7XHJcbmxldCBNYW5hZ2VyUXVpeiA9IHJlcXVpcmUoJy4vTWFuYWdlclF1aXonKTtcclxubGV0IE1hbmFnZXJEb20gPSByZXF1aXJlKCcuL01hbmFnZXJEb20nKTtcclxuXHJcblxyXG5cclxubGV0IG1hbmFnZXJGaWxlID0gbmV3IE1hbmFnZXJGaWxlKCk7XHJcbmxldCBsaXN0SnNvbiA9IG1hbmFnZXJGaWxlLmxvYWRKc29uKCk7XHJcbmxldCBtYW5hZ2VyUXVpeiA9IG5ldyBNYW5hZ2VyUXVpeihsaXN0SnNvbi5wcmVndW50YXMpO1xyXG5sZXQgbWFuYWdlckRvbSA9IG5ldyBNYW5hZ2VyRG9tKCk7XHJcbmxldCBudW1iZXJGb3JXaW4gPSA1O1xyXG5sZXQgbWFuYWdlckdhbWUgPSBuZXcgTWFuYWdlckdhbWUobWFuYWdlclF1aXosbWFuYWdlckRvbSxudW1iZXJGb3JXaW4pO1xyXG5cclxud2luZG93LnN0YXJ0ID0gbWFuYWdlckdhbWUuc3RhcnRHYW1lO1xyXG5cclxuXHJcblxyXG5cclxuLypcclxud2luZG93LnVjbGlja2VkID0gZnVuY3Rpb24oKSB7XHJcbiAgICBjYXJsb3Muc2FsdWRhKCk7XHJcbn07XHJcbndpbmRvdy51Y2xpY2tlZCA9IHVjbGlja2VkOyovXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9pbmRleC5qcyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gTWFuYWdlckZpbGUoKSB7XHJcbiAgICAgdGhpcy5sb2FkSnNvbiA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgbGV0IGh0dHBSZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgaHR0cFJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChodHRwUmVxdWVzdC5yZWFkeVN0YXRlID09PSA0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaHR0cFJlcXVlc3Quc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IGh0dHBSZXF1ZXN0LnJlc3BvbnNlVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJlZ3VudGFzJyxkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaHR0cFJlcXVlc3Qub3BlbignZ2V0JywgJy4uL3B1YmxpYy9wcmVndW50YXMuanNvbicpO1xyXG4gICAgICAgIGh0dHBSZXF1ZXN0LnNlbmQoKTtcclxuICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwcmVndW50YXNcIikpO1xyXG4gICAgfVxyXG59O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvTWFuYWdlckZpbGUuanMiLCIndXNlIHN0cmljdCc7XHJcblxyXG5sZXQgTWFuYWdlckRvbSA9IHJlcXVpcmUoJy4uL3NyYy9NYW5hZ2VyRG9tJyk7XHJcblxyXG5mdW5jdGlvbiBNYW5hZ2VyR2FtZShtYW5hZ2VyUXVpeiwgbWFuYWdlckRvbSwgbnVtYmVyRm9yV2luKSB7XHJcblxyXG4gICAgY29uc3QgTlVNQkVSX0ZPUl9XSU4gPSBudW1iZXJGb3JXaW47XHJcblxyXG4gICAgbGV0IGNvdW50UXVlc3Rpb25zU3VjY2VzcyA9IDA7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKTtcclxuICAgIGZ1bmN0aW9uIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIGlmKE5VTUJFUl9GT1JfV0lOID09IHVuZGVmaW5lZCl0aHJvdyBcIllvdSBoYXZlIGludHJvZHVjZSBudW1iZXJGb3JXaW4gaW4gdGhlIGNvbnN0cnVjdG9yXCI7XHJcbiAgICAgICAgaWYoIU51bWJlci5pc0ludGVnZXIoTlVNQkVSX0ZPUl9XSU4pKXRocm93IFwiWW91IG51bWJlckZvcldpbiBoYXZlIHR5cGUgSW50ZWdlclwiO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnN0YXJ0R2FtZSA9ICgpID0+IHtcclxuICAgICAgICBtYW5hZ2VyRG9tLnN0YXJ0KCk7XHJcblxyXG4gICAgICAgIGxldCBxdWVzdGlvbiA9IG1hbmFnZXJRdWl6LmdldEN1cnJlbnRRdWVzdGlvbigpO1xyXG4gICAgICAgIG1hbmFnZXJEb20ucmVuZGVyUXVlc3Rpb24ocXVlc3Rpb24pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZUFuc3dlciA9IChhbnN3ZXIpID0+IHtcclxuICAgICAgICBsZXQgcXVlc3Rpb24gPSBtYW5hZ2VyUXVpei5nZXRDdXJyZW50UXVlc3Rpb24oKTtcclxuXHJcbiAgICAgICAgaWYobWFuYWdlclF1aXouaXNDb3JyZWN0UXVlc3Rpb24oYW5zd2VyKSl7XHJcbiAgICAgICAgICAgIGNvdW50UXVlc3Rpb25zU3VjY2VzcyArPSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWFuYWdlckRvbS5yZW5kZXJRdWVzdGlvbkFuc3dlcmVkKHF1ZXN0aW9uKTtcclxuICAgICAgICBtYW5hZ2VyRG9tLlNob3dCdXR0b25OZXh0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMubmV4dFF1ZXN0aW9uID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBtYW5hZ2VyUXVpei51cGRhdGVRdWVzdGlvbnMoKTtcclxuICAgICAgICBsZXQgcXVlc3Rpb24gPSBtYW5hZ2VyUXVpei5nZXRDdXJyZW50UXVlc3Rpb24oKTtcclxuICAgICAgICBtYW5hZ2VyRG9tLnJlbmRlclF1ZXN0aW9uKHF1ZXN0aW9uKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1BsYXllcldpbiA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuIChjb3VudFF1ZXN0aW9uc1N1Y2Nlc3MgPT0gTlVNQkVSX0ZPUl9XSU4pO1xyXG4gICAgfTtcclxufVxyXG5tb2R1bGUuZXhwb3J0cyA9IE1hbmFnZXJHYW1lO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9NYW5hZ2VyR2FtZS5qcyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmZ1bmN0aW9uIE1hbmFnZXJRdWl6KExpc3RRdWVzdGlvbikge1xyXG5cclxuICAgIGxldCBsaXN0UXVlc3Rpb24gPSBMaXN0UXVlc3Rpb247XHJcbiAgICBsZXQgY3VycmVudFF1ZXN0aW9uID0gcmFuZG9tUXVlc3Rpb24oKTtcclxuXHJcblxyXG4gICAgdGhpcy5nZXRDdXJyZW50UXVlc3Rpb24gPSAoKSA9PiAoY3VycmVudFF1ZXN0aW9uKTtcclxuXHJcbiAgICB0aGlzLmdldExpc3RRdWVzdGlvbiA9ICgpID0+KGxpc3RRdWVzdGlvbik7XHJcblxyXG5cclxuICAgICB0aGlzLmlzQ29ycmVjdFF1ZXN0aW9uID0gZnVuY3Rpb24ocXVlc3Rpb24sYW5zd2VyKSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHF1ZXN0aW9uLnJlc3B1ZXN0YSA9PSBhbnN3ZXI7XHJcbiAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudXBkYXRlUXVlc3Rpb25zID0gIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGRlbGV0ZUN1cnJlbnRRdWVzdGlvblRvTGlzdCgpO1xyXG4gICAgICAgIGN1cnJlbnRRdWVzdGlvbiA9IHJhbmRvbVF1ZXN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmFuZG9tUXVlc3Rpb24oKSB7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGxpc3RRdWVzdGlvbi5sZW5ndGggLSAwKSArIDApO1xyXG4gICAgICAgIHJldHVybiBsaXN0UXVlc3Rpb25baW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGRlbGV0ZUN1cnJlbnRRdWVzdGlvblRvTGlzdCgpe1xyXG4gICAgICAgIGxldCBwb3NpdGlvbiA9IGxpc3RRdWVzdGlvbi5pbmRleE9mKGN1cnJlbnRRdWVzdGlvbik7XHJcbiAgICAgICAgbGlzdFF1ZXN0aW9uLnNwbGljZShwb3NpdGlvbiwxKTtcclxuICAgIH1cclxuXHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBNYW5hZ2VyUXVpejtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvTWFuYWdlclF1aXouanMiXSwic291cmNlUm9vdCI6IiJ9